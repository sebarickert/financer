name: "Cache node_modules"
description: "Cache node_modules for the project"

outputs:
  cache-hit:
    description: "true/false if node_modules were cached"
    value: "{{ steps.cache-modules.outputs.cache-hit }}"

runs:
  using: "composite"
  steps:
    - uses: actions/cache@v3
      id: cache-modules
      if: always()
      with:
        path: |
          **/node_modules
          packages/types/dist
          packages/frontend/src/redux/api/generated/*.ts
          ~/.cache/Cypress
        key: ${{ runner.os }}-modules-${{ hashFiles('./package-lock.json') }}-${{ hashFiles('./packages/types/src/*') }}-${{ hashFiles('./packages/frontend/src/redux/schema/api-spec.json') }}
